---
import { getTagsInfo } from "@/scripts/tags";
import "@/styles/tag-cloud.less";

function generateRandomColor() {
  const MAX_RGB_VALUE = 115;
  const MIN_RGB_VALUE = 40;
  const [r, g, b] = ["r", "g", "b"].map(
    () =>
      Math.floor(Math.random() * (MAX_RGB_VALUE - MIN_RGB_VALUE)) +
      MIN_RGB_VALUE
  );
  return `rgb(${r}, ${g}, ${b})`;
}
---

<div class="tag-cloud">
  {
    Array.from(await getTagsInfo()).map(([k, v]) => (
      <a
        href={`/tags/${k}`}
        style={`font-size: ${Math.min(
          22.5,
          1.8 * v + 13
        )}px; color: ${generateRandomColor()}`}
      >
        {k}
      </a>
    ))
  }
</div>
