---
export interface Props {
  title: string;
  metas?: {
    [key: string]: string;
  };
}

let { title, metas } = Astro.props;

if (!metas?.viewport) {
  if (!metas) metas = {};
  metas.viewport = "width=device-width, initial-scale=1.0";
}
metas.generator = Astro.generator;
// import "modern-css-reset";

import "@/styles/han.less";
import "@/styles/monospace.less";
import "@/styles/no-dark.less";
---

<!doctype html>
<html lang="zh" id="vert">
  <head>
    <meta charset="utf-8" />
    {
      metas &&
        Object.entries(metas).map(([key, value]) => (
          <meta name={key} content={value} />
        ))
    }
    <title>{title}</title>
    <link
      href="/atom.xml"
      type="application/atom+xml"
      rel="alternate"
      title="RSS 订阅"
    />
    <link
      rel="icon"
      type="image/png"
      data-licence="Twemoji CC-BY 4.0"
      href="https://user-images.githubusercontent.com/20166026/235318317-7fb2fe2f-ebd9-4e20-b24a-474611e3738f.png"
    />
    <link
      rel="apple-touch-icon"
      href="https://user-images.githubusercontent.com/20166026/235318317-7fb2fe2f-ebd9-4e20-b24a-474611e3738f.png"
    />
    <link rel="prefetch" href="/" />
    <link rel="prefetch" href="/about" />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <style>
      @view-transition {
        navigation: auto; /* enabled! */
      }
    </style>
  </head>
  <body>
    <slot />
    <div id="no-darkreader">
      <div id="notice">
        <p>
          本站不支持 Dark Reader 的暗色模式，请对本站关闭后再访问。<br
          />（亮色模式的对比度、亮度等选项不受影响）
        </p><br />
        <p lang="en">
          This site does not support dark mode by Dark Reader, please turn it
          off before visiting.<br />(Contrast, brightness, etc. of light mode
          are not affected)
        </p>
      </div>
    </div>
    <style is:global>
      :root {
        --accent-color: rgb(0, 0, 0);
      }

      html {
        background-color: var(--html-bg-color, white);
        container-type: inline-size;
        container-name: html;
      }

      body {
        margin: 0px;
        padding: 0px;
        box-sizing: content-box;
        position: relative;
        & + * {
          padding: 0;
          margin: 0;
        }
      }

      h1 {
        text-align: center;
      }

      h2,
      h3,
      h4,
      h5,
      h6 {
        text-align: start;
      }

      ::selection {
        background-color: rgba(37, 37, 37, 0.85);
        color: #fff;
      }

      pre,
      code {
        font-family: "更纱等距黑体", "Fira Code", "FiraCode NF",
          "Noto Sans CJK Mono SC", "Source Code Pro", consolas, monospace;
      }

      figure {
        margin: 2em 0;
      }

      * {
        text-spacing-trim: space-first;
      }

      .MathJax {
        writing-mode: horizontal-tb !important;
      }

      @media (prefers-reduced-motion) {
        @view-transition {
          navigation: none;
        }
      }
    </style>
    <style is:global lang="less">
      details > summary {
        padding-inline: 1em;
        padding-block: 5px;
        transition: background-color 0.1s ease-in-out;
        &:hover {
          background-color: rgba(0, 0, 0, 0.05);
          cursor: s-resize;
          &[open] {
            cursor: n-resize;
          }
        }
        &:active {
          background-color: rgba(0, 0, 0, 0.1);
        }
      }
    </style>
  </body>
</html>
